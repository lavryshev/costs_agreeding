<h1>Заявки</h1>
<div>
  <%= link_to "Добавить заявку", new_expense_path %>
</div>
<br>
<br>
<div>
  <%= form_with url: expenses_path, method: :get do |form| %>
    <p>Отбор</p>
    <div>
      <%= form.hidden_field :field, value: @sort[:field] %>
      <%= form.hidden_field :direction, value: @sort[:direction] %>
      <%= form.check_box :f_not_agreed, { checked: @filtered_statuses_id.include?(ExpenseStatus.not_agreed.id.to_s) }, ExpenseStatus.not_agreed.id.to_s %>
      <%= form.label :f_not_agreed, 'Не согласована' %>
      <%= form.check_box :f_agreed, { checked: @filtered_statuses_id.include?(ExpenseStatus.agreed.id.to_s) }, ExpenseStatus.agreed.id.to_s %>
      <%= form.label :f_agreed, 'Согласована' %>
      <%= form.check_box :f_rejected, { checked: @filtered_statuses_id.include?(ExpenseStatus.rejected.id.to_s) }, ExpenseStatus.rejected.id.to_s %>
      <%= form.label :f_rejected, 'Отклонена' %> 
    </div>
    <div>
      <%= form.submit 'Применить' %>
    </div>
  <% end %>
</div>
<br>
<br>
<div>
  Сортировать по:
  <%= sort_indicator(@sort[:direction]) if @sort[:field] == 'created_at' %> 
  <%= sort_link(sort: @sort, field: 'created_at', label: 'Дата', filter_params: @filter_params) %> |
  <%= sort_indicator(@sort[:direction]) if @sort[:field] == 'sum' %> 
  <%= sort_link(sort: @sort, field: 'sum', label: 'Сумма', filter_params: @filter_params) %> |
  <%= sort_indicator(@sort[:direction]) if @sort[:field] == 'payment_date' %>
  <%= sort_link(sort: @sort, field: 'payment_date', label: 'Дата оплаты', filter_params: @filter_params) %>
</div>
<br>
<br>
<%= render @expenses %>
<%= paginate @expenses %>